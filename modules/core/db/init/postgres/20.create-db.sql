-- begin APPLICATION_STORE_CHAIN
create unique index IDX_APPLICATION_STORE_CHAIN_UK_NAME on APPLICATION_STORE_CHAIN (NAME) where DELETE_TS is null ^
-- end APPLICATION_STORE_CHAIN
-- begin APPLICATION_STORE
alter table APPLICATION_STORE add constraint FK_APPLICATION_STORE_ON_STORE_CHAIN foreign key (STORE_CHAIN_ID) references APPLICATION_STORE_CHAIN(ID)^
alter table APPLICATION_STORE add constraint FK_APPLICATION_STORE_ON_ADDRESS foreign key (ADDRESS_ID) references APPLICATION_ADDRESS(ID)^
create unique index IDX_APPLICATION_STORE_UK_NUMBER on APPLICATION_STORE (NUMBER) where DELETE_TS is null ^
create index IDX_APPLICATION_STORE_ON_STORE_CHAIN on APPLICATION_STORE (STORE_CHAIN_ID)^
create index IDX_APPLICATION_STORE_ON_ADDRESS on APPLICATION_STORE (ADDRESS_ID)^
-- end APPLICATION_STORE
-- begin APPLICATION_RETAILER
alter table APPLICATION_RETAILER add constraint FK_APPLICATION_RETAILER_ON_USER foreign key (USER_ID) references SEC_USER(ID)^
alter table APPLICATION_RETAILER add constraint FK_APPLICATION_RETAILER_ON_ADDRESS foreign key (ADDRESS_ID) references APPLICATION_ADDRESS(ID)^
create unique index IDX_APPLICATION_RETAILER_UK_NAME on APPLICATION_RETAILER (NAME) where DELETE_TS is null ^
create index IDX_APPLICATION_RETAILER_ON_USER on APPLICATION_RETAILER (USER_ID)^
create index IDX_APPLICATION_RETAILER_ON_ADDRESS on APPLICATION_RETAILER (ADDRESS_ID)^
-- end APPLICATION_RETAILER
-- begin APPLICATION_PRODUCT
alter table APPLICATION_PRODUCT add constraint FK_APPLICATION_PRODUCT_ON_RETAILER foreign key (RETAILER_ID) references APPLICATION_RETAILER(ID)^
create unique index IDX_APPLICATION_PRODUCT_UK_NAME on APPLICATION_PRODUCT (NAME) where DELETE_TS is null ^
create unique index IDX_APPLICATION_PRODUCT_UK_PRICE_FROM_RETAILER on APPLICATION_PRODUCT (PRICE_FROM_RETAILER) where DELETE_TS is null ^
create index IDX_APPLICATION_PRODUCT_ON_RETAILER on APPLICATION_PRODUCT (RETAILER_ID)^
-- end APPLICATION_PRODUCT
-- begin APPLICATION_PRICE_HISTORY
alter table APPLICATION_PRICE_HISTORY add constraint FK_APPLICATION_PRICE_HISTORY_ON_PRODUCT foreign key (PRODUCT_ID) references APPLICATION_PRODUCT(ID)^
alter table APPLICATION_PRICE_HISTORY add constraint FK_APPLICATION_PRICE_HISTORY_ON_SHOP foreign key (SHOP_ID) references APPLICATION_STORE(ID)^
create index IDX_APPLICATION_PRICE_HISTORY_ON_PRODUCT on APPLICATION_PRICE_HISTORY (PRODUCT_ID)^
create index IDX_APPLICATION_PRICE_HISTORY_ON_SHOP on APPLICATION_PRICE_HISTORY (SHOP_ID)^
-- end APPLICATION_PRICE_HISTORY
-- begin APPLICATION_PURCHASE
alter table APPLICATION_PURCHASE add constraint FK_APPLICATION_PURCHASE_ON_SHOP foreign key (SHOP_ID) references APPLICATION_STORE(ID)^
create index IDX_APPLICATION_PURCHASE_ON_SHOP on APPLICATION_PURCHASE (SHOP_ID)^
-- end APPLICATION_PURCHASE
-- begin APPLICATION_STORE_PRODUCT
alter table APPLICATION_STORE_PRODUCT add constraint FK_APPLICATION_STORE_PRODUCT_ON_STORE foreign key (STORE_ID) references APPLICATION_STORE(ID)^
alter table APPLICATION_STORE_PRODUCT add constraint FK_APPLICATION_STORE_PRODUCT_ON_PRODUCT foreign key (PRODUCT_ID) references APPLICATION_PRODUCT(ID)^
create index IDX_APPLICATION_STORE_PRODUCT_ON_STORE on APPLICATION_STORE_PRODUCT (STORE_ID)^
create index IDX_APPLICATION_STORE_PRODUCT_ON_PRODUCT on APPLICATION_STORE_PRODUCT (PRODUCT_ID)^
-- end APPLICATION_STORE_PRODUCT
